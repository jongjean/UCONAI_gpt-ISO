## 2025-11-30 (폴더 구조 및 백엔드 서버 현황)

- UCONAI/ (상위 관제/공통 백엔드 위치)
   - backend/ (공통 백엔드, Node.js, 포트 4400)
   - UCONAI_gpt-ISO/ (프론트엔드만 존재, 상위 backend를 사용)
   - [다른 프로젝트들]/ (각각 프론트엔드만 존재, 상위 backend를 사용)

- 백엔드 서버는 /home/ucon/UCONAI/backend에서 npm run dev로 구동하며, 포트 4400에서 서비스됨.
- 모든 프론트엔드 프로젝트는 http://localhost:4400을 통해 공통 백엔드 API를 사용함.

예시:
cd /home/ucon/UCONAI/backend
npm install # 최초 1회
npm run dev # 또는 npm run start

백엔드 서버 로그:
UCONAI_gpt-ISO backend listening on port 4400

이 구조와 포트 기준으로 프론트엔드-백엔드 연동, 배포, 환경설정 등을 진행한다.
# 작업 및 운영 지침 (instructions.md)

이 파일은 프로젝트 운영, 개발, 빌드, 백업, 협업 등과 관련된 모든 지침을 기록·관리하는 용도입니다.



지침1. cd + 백업 + 빌드

"항상 빌드 전에는 아래 원칙을 반드시 지킨다.

1. cd frontend && cp [백업대상파일] src/[백업대상파일].날짜_시퀀스번호.bak && npm run build
   형식으로, 한 번에 실행한다.

2. 백업 대상 파일은 다음을 모두 포함해야 한다.
   - (1) 수정·변경된 모든 파일 (예: App.tsx, GuidePanel.tsx 등)
   - (2) 새로 생성된 모든 파일 (예: Sidebar.tsx, MainChat.tsx 등)
   - (3) 위 파일들은 반드시 백업 리스트에 포함되어야 하며, 하나라도 누락되면 안 된다.
   - (4) 새로 생성된 파일은 최초 버전을 별도로 백업해둔다.

3. 백업 파일명은 src/파일명.날짜_시퀀스번호.bak (예: src/App.tsx.20251124_01.bak) 형식으로 한다.

4. 빌드 전 반드시 위 백업을 선행한다.

예시: cd frontend && cp App.tsx src/App.tsx.20251124_01.bak && cp components/Sidebar.tsx src/components/Sidebar.tsx.20251124_01.bak && npm run build




지침2. 마일스톤 관리
"작업 시작 전 전체 작업내용을 대화만으로 합의해서 마일스톤을 작성한다. 작성한 마일스톤은 todos에 등록한다. 각 마일스톤이 완료되면 다음 마일스톤으로 넘어가기 전 빌드 지침을 시작한다. 마일스톤이 완료되면 깃푸시를 실행한다. 이후 마일스톤 현황을 브리핑 한다."




지침3. 자동진행
"업무 지시하면 곧바로 실행하고 지시 결과가 마일스톤 단위로 완료 될 때까지 계속 진행한다.
특별히, 계속 진행합니다. 연속진행합니다. 연속실행합니다. 처리합니다. 등의 말을 하면서 승인을 기다리는 일이 없게 해야 해
실행 지시 후 진행 중에 중요한 결정사항이 아닌 상황에서 중간 중간 계속 진행할건지 물어보는 행동은 금지ㅎ"



지침4. 코딩 작업
"코딩을 시작하라는 명령 (코딩해, ㅇㅋ, ㄱㄱ )를 내리기 전에는 임의로 코딩을 시작하지 않는다.




지침5. 지침우선순위
"지침의 우선은 대화창에서 "지침이야" 라고 선언하는 것이 최우선이다. 내용이 기존 지침과 상충할 경우 질문을 하면 지시하는대로 따른다."









## [예시] 지침 작성 방법
- 각 항목은 번호 또는 소제목으로 구분
- 변경/추가/삭제 시 날짜와 작성자, 사유를 명확히 기록

---

## 2025-11-24 (작성 예시)

<!-- 1. 모든 코드 변경 전, OS 복사(cp) 방식으로 백업을 남긴다.
   - 백업 파일명: `파일명.날짜_일련번호.bak` (예: App.tsx.20251124_01.bak)
2. 백업 후 반드시 빌드 지침에 따라 샐행 한다.
3. GuidePanel의 드래그앤드롭 정렬 기능은 반드시 동작해야 한다.
4. 질문 없이 바로 작업을 진행한다.
5. 각 단계(마일스톤)마다 작업 후 빌드와 백업을 반복한다.
6. 오류/문제 발생 시 즉시 패치, 빌드, 백업을 반복한다.
7. 빌드가 완료되면 반드시 frontend/dist의 모든 파일을 /var/www/iso(또는 운영 Caddyfile에서 지정한 정적 루트)에 복사하여 실제 서비스에 반영한다.

예시: sudo rm -rf /var/www/iso/* && sudo cp -r dist/* /var/www/iso/

이 과정을 누락하면 실제 서비스에 최신 빌드가 반영되지 않는다." -->

cd /home/ucon/UCONAI_gpt-ISO/frontend \
&& cp src/App.tsx src/App.tsx.$(date +%Y%m%d_%H%M%S).bak \  --- 직전 백업 이후 변경된 파일은 모두 백업에 포함시킨다.
&& npm run build \
&& sudo rm -rf /var/www/iso/* \
&& sudo cp -r dist/* /var/www/iso/


---
